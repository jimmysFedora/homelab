services:
  adguard-dns-visualizer:
    image: azwanngali/adguard-dns-visualizer:latest
    env_file:
      - .env
    # ports:
    #   - 8080:8080
    container_name: dns-visualizer
    restart: unless-stopped
    labels:
      - traefik.enable=true
      - traefik.http.routers.dns-visualizer-insecure.rule=Host(`dns-visualizer.mistyfumes.dev`)
      - traefik.http.routers.dns-visualizer-insecure.entrypoints=http
      - traefik.http.routers.dns-visualizer-insecure.middlewares=https-redirect@file
      - traefik.http.routers.dns-visualizer-secure.rule=Host(`dns-visualizer.mistyfumes.dev`)
      - traefik.http.routers.dns-visualizer-secure.entrypoints=https
      - traefik.http.routers.dns-visualizer-secure.tls=true
      - traefik.http.routers.dns-visualizer-secure.tls.certresolver=cloudflare
      - traefik.http.services.dns-visualizer.loadbalancer.server.port=8080
    networks:
      - frontend

networks:
  frontend:
    external: true