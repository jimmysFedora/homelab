apiVersion: apps/v1
kind: Deployment
metadata:
  name: metube
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: metube
  template:
    metadata:
      labels:
        app: metube
    spec:
      containers:
        - image: ghcr.io/alexta69/metube:2026.01.30@sha256:86a2c0afcbf9b192fa858923377fe423438ac9504d28c3a32439b6b037352ece
          name: metube
          ports:
            - containerPort: 8081
          env:
            - name: DELETE_FILE_ON_TRASHCAN
              valueFrom:
                configMapKeyRef:
                  name: metube-configmap
                  key: DELETE_FILE_ON_TRASHCAN
          volumeMounts:
            - mountPath: /downloads
              name: metube-downloads
      volumes:
        - name: metube-downloads
          persistentVolumeClaim:
            claimName: metube-nfs-pvc